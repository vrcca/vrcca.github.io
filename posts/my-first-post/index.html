<!DOCTYPE html>
<html lang="en-US" class="scroll-smooth dark">
  <head> 

<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Hello World!</title>
<meta name="description" content="Hello world! Here is my first post.
I shall begin it explaining how I setup this blog using GitHub Pages, GitLab and Hugo.">
<link rel="canonical" href="https://blog.vitor.info/posts/my-first-post/">
<link rel="robots" href="/robots.txt" />

<link rel="icon" type="image/x-icon" href="/icons/favicon.ico">
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script type="text/x-mathjax-config">MathJax.Hub.Config({ tex2jax: { inlineMath: [['$','$'], ['\\(','\\)']] } });</script>

<link rel="stylesheet" href="https://blog.vitor.info/css/app.min.ae63891363b874de0ed4feb69beb0991bbf9fd9132d8abe3321ba8fefc4c13df.css" integrity="sha256-rmOJE2O4dN4O1P62m+sJkbv5/ZEy2KvjMhuo/vxME98=" /></head>

  <body class="max-w-screen-md mx-auto">
    <div class="header">
      <header class="flex flex-col sm:flex-row items-center gap-5 sm:gap-10 pt-16 py-12">
   


<div class="flex-none w-20 h-20 rounded-full overflow-hidden">
  <a href="https://blog.vitor.info/">
    <img
      srcset="/img/profile-picture_hub20fe4bee6a3f97e18720e55e817067e_138278_80x80_fill_q90_box_smart1.jpg 80w"
      src="/img/profile-picture.jpg"
      width="774"
      height="800"
      alt="Vitor Cavalcanti"
    />
  </a>
</div>

  
  <div class="flex flex-col gap-5">
    <a href="https://blog.vitor.info/">
  <h1 id="site-title">Vitor Cavalcanti</h1>
</a>
 
    <nav>
  <ul>
     
    
    <li>
      <a href="/" class="">
        Home
      </a>
    </li>
    
    <li>
      <a href="/posts" class="">
        Posts
      </a>
    </li>
    
    <li>
      <a href="/categories" class="">
        Categories
      </a>
    </li>
    
    <li>
      <a href="/tags" class="">
        Tags
      </a>
    </li>
    
  </ul>
</nav>

  </div>
</header>

      <button class="toggle-theme" aria-label="Toggle Theme" title="Toggle Theme" onclick="toggleTheme()">
  <span class="theme-icon light"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v2.25m6.364.386l-1.591 1.591M21 12h-2.25m-.386 6.364l-1.591-1.591M12 18.75V21m-4.773-4.227l-1.591 1.591M5.25 12H3m4.227-4.773L5.636 5.636M15.75 12a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0z" />
</svg> </span>
  <span class="theme-icon dark"> <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
    <path stroke-linecap="round" stroke-linejoin="round" d="M21.752 15.002A9.718 9.718 0 0118 15.75c-5.385 0-9.75-4.365-9.75-9.75 0-1.33.266-2.597.748-3.752A9.753 9.753 0 003 11.25C3 16.635 7.365 21 12.75 21a9.753 9.753 0 009.002-5.998z" />
</svg> </span>
</button>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const theme = localStorage.getItem('theme');

    if (!theme || theme === 'light') {
      setTheme('light');
    } else {
      setTheme(theme);
    }
  });

  function setTheme(theme) {
    const html = document.querySelector('html');
    localStorage.setItem('theme', theme);

    if (theme === 'light') {
      if (html.classList.contains('dark')) {
        document.querySelector('html').classList.remove('dark');
      }

      document.querySelector('.theme-icon.light').style.display = 'none';
      document.querySelector('.theme-icon.dark').style.display = 'block';
    } else {
      if (!html.classList.contains('dark')) {
        document.querySelector('html').classList.add('dark');
      }

      document.querySelector('.theme-icon.dark').style.display = 'none';
      document.querySelector('.theme-icon.light').style.display = 'block';
    }
  }

  function toggleTheme() {
    const theme = localStorage.getItem('theme');

    if (theme === 'light') {
      setTheme('dark');
    } else {
      setTheme('light');
    }
  }
</script>
    </div>
  
    <main id="content">

<article class="flex flex-col gap-10">
  <header class="flex flex-col gap-2">
    <h2 class="title-large">Hello World!</h2>

    <div class="meta">
      
      <time datetime="2018-10-18 15:21:02 &#43;0000 UTC" title='Thu, Oct 18, 2018, 3:21 PM UTC'>
        18/10/2018 - Estimated reading time: 6 minutes
      </time>

       
       — 
        
          <a class="categories" href="/categories/tutorials/" alt="Tutorials">
            Tutorials
          </a>
         
      
    </div>
  </header>

  

  <section><p>Hello world! Here is my first post.</p>
<p>I shall begin it explaining how I setup this blog using GitHub Pages, GitLab and Hugo.</p>
<h2 id="creating-a-new-github-pages">Creating a new GitHub Pages</h2>
<p>To setup a new GitHub page, the <a href="https://pages.github.com/">website tutorial</a> is pretty straightforward, so I will skip this.</p>
<h2 id="hugo">Hugo</h2>
<p><a href="https://gohugo.io/">Hugo</a> is a static website generator built on Go. It is extremely fast and requires little setup to start using it.</p>
<p>To install it is as simple as:</p>
<p><strong>MacOS</strong><br>
<code>brew install hugo</code></p>
<p><strong>Linux</strong><br>
<code>apt install hugo</code> or <code>snap install hugo</code></p>
<p>Hugo has <a href="https://themes.gohugo.io/">many themes</a> you can choose. For this post I will use <a href="https://themes.gohugo.io/pixyll/">Pixyll</a> which is the same I used for this blog. It has support to Google Analytics, Markdown and Disqus integration, which is something I was looking for.</p>
<h3 id="up-and-running">Up and running</h3>
<p>After installing Hugo, you can create a new site with:</p>
<pre tabindex="0"><code>$ hugo new site my-new-blog
</code></pre><p>And you can start a server with:</p>
<pre tabindex="0"><code>$ hugo server
</code></pre><p>This will build all static files and keep an eye on any updates you do in your posts.</p>
<p>To create a new post just type:</p>
<pre tabindex="0"><code>$ hugo new post file-name
</code></pre><h3 id="installing-a-theme">Installing a theme</h3>
<p>You can follow the instructions of the theme, but usually it goes like this:</p>
<pre tabindex="0"><code>$ cd my-new-blog
$ git clone https://github.com/azmelanar/hugo-theme-pixyll.git themes/hugo-theme-pixyll

# Copies default configurations from themes to your new site
$ cp -R themes/hugo-theme-pixyll/exampleSite/config.toml ./config.toml
</code></pre><p>After that, it&rsquo;s important for you to edit the file <code>config.toml</code> and properly set your name, baseUrl, GitHub page, etc. You can run <code>hugo server</code> to make sure that it works properly.</p>
<h3 id="manually-deploying-your-changes-to-github-pages">Manually deploying your changes to GitHub pages</h3>
<p>After creating your GitHub Pages, clone it in the parent directory that has your new hugo website. Then you will have to copy all static files from your hugo website to the GitHub pages repository, commit and push the changes.</p>
<p>You can manually deploy your new blog with the following commands:</p>
<pre tabindex="0"><code># Generates the static files required by GitHub pages
$ hugo -d ../my-new-blog.github.io/
$ cd ../my-new-blog.github.io/
$ git commit -am &#34;My new blog&#34;
$ git push
</code></pre><p>If you try to access your GitHub pages, you should see it working as it would locally.</p>
<h3 id="automatically-building--deploying-from-gitlab">Automatically building &amp; deploying from GitLab</h3>
<p>If you are like me, you probably don&rsquo;t want to remember to type the commands above for each post. So I researched how to automatically generate a new blog version automatically, but the solution ends up either creating a <code>deploy.sh</code> script to manually run it or use CI. We are going to do the latter with <a href="https://about.gitlab.com/features/gitlab-ci-cd/">GitLab CI</a>.</p>
<p><strong>Why GitLab?</strong></p>
<ul>
<li>It has free private repositories;</li>
<li>CI/CD built-in;</li>
<li>Kanban boards;</li>
<li>WebIDE (you can create your blog posts in your browser. No need to install hugo.)</li>
<li>Free private groups; and more!</li>
</ul>
<p>Let&rsquo;s start by <strong>creating our GitLab repository</strong> first:</p>
<ol>
<li>Create a new user account in <a href="https://gitlab.com/users/sign_in">GitLab</a> for free.</li>
<li>Create a <a href="https://gitlab.com/projects/new">new project</a> with whatever name you like. <em>Here I made my repository private, but it is up to you to decide.</em></li>
<li>Clone the repository locally and push the files from your hugo setup.</li>
</ol>
<p>Now we need to tell GitLab to install Hugo, build our static files and deploy them to GitHub (just like we would do manually). Like I said before, we are going to use GitLab CI.
To setup GitLab CI it&rsquo;s pretty simple, just add a file named <code>.gitlab-ci.yml</code> to the root of your GitLab project, and it should start building. This file is used to tell GitLab how to build your repository.</p>
<p>The steps we need to reproduce in GitLab basically are install, build and deploy:</p>
<ol>
<li>Somehow <strong>install</strong> Hugo somewhere;</li>
<li>With the files from our GitLab repository, automatically <strong>build</strong> our blog;</li>
<li><strong>Deploy</strong> the generated files to GitHub;</li>
</ol>
<p>Our build will have two phases: build and deploy. So add this to the top of your <code>.gitlab-ci.yml</code>:</p>
<pre tabindex="0"><code>stages:
  - build
  - deploy
</code></pre><p>The <code>stages</code> property is used so you can make GitLab follow the given order when running your build steps. In this case, it will run all the steps that has <code>build</code> set to <code>stage</code> property, then <code>deploy</code>.</p>
<h4 id="installing-hugo-in-gitlab-ci">Installing Hugo in GitLab CI</h4>
<p>All builds in GitLab run within a docker container, therefore, if your container run linux, you can run any Linux command in it.</p>
<p>You can install Hugo and build your blog by adding this to our <code>.gitlab-ci.yml</code>:</p>
<pre tabindex="0"><code>build:
  stage: build
  before_script:
    - curl -L -o hugo.deb https://github.com/gohugoio/hugo/releases/download/v0.49.2/hugo_0.49.2_Linux-64bit.deb
    - dpkg -i hugo.deb
  script:
    - mkdir -p build/ &amp;&amp; hugo -d build/
  artifacts:
    name: &#39;blog-$CI_COMMIT_REF_NAME&#39;
    expire_in: 1 day
    paths:
      - build/
</code></pre><p>The <code>artifacts</code> step tells GitLab that, after this whole step finishes, you want to keep the <code>build/</code> folder for a single day. This is useful in case you want to rollback changes or debug what your CI is doing.</p>
<h4 id="automatically-deploying-to-github-pages">Automatically Deploying to GitHub Pages</h4>
<p>Now that we have installed Hugo and generated our static website, we need to deploy to GitHub.</p>
<p>Deploying to GitHub requires us to clone our git repository from GitHub, copy our new build to it, and commit and pushing the changes.</p>
<pre tabindex="0"><code>deploy:
  stage: deploy
  before_script:
    - git clone https://githubusername:$GITHUB_ACCESS_TOKEN@github.com/githubusername/newblog.github.io.git blog-github/
    - git config --global user.name &#34;AuthorName&#34;
    - git config --global user.email &#34;email@myemail.com&#34;
  script:
    - rm -rf blog-github/content/
    - cp -R build/* blog-github/
    - cd blog-github/
    - git diff --quiet &amp;&amp; git diff --staged --quiet || git commit -am &#34;$CI_COMMIT_TITLE&#34; &amp;&amp; git push
  dependencies:
    - build
</code></pre><p>The <code>before_script</code> clones your repository with an user and password. The <code>$GITHUB_ACCESS_TOKEN</code> variable could be replaced with your GitHub&rsquo;s password, but we don&rsquo;t want to expose that. We will revisit it later. It also sets your name and email for future commits.</p>
<p>The <code>scripts</code> steps does this:</p>
<ol>
<li>Removes the content/ folder. This is needed because you would never be able to rename or remove a post otherwise.</li>
<li>Copies all static content from the <code>build/</code> folder generated in the the previous step (see <code>dependencies</code> property) to the GitHub directory.</li>
<li>The fourth step only adds and commits files if there are any changes in your <code>git diff</code> command. That&rsquo;s why we run a command with <code>||</code>. If there is no diff, there is no need to push things.</li>
</ol>
<p>The <code>dependencies</code> property tells GitLab that this step has dependencies with the <code>build</code> step. This enables us to reference files generated in other builds and maps a dependency graph between steps.</p>
<p>After adding all this to <code>.gitlab-ci.yml</code> and commiting to GitLab, the build should be broken, but you should see that the CI/CD Pipelines are now being triggered on changes. We still need to set the <code>$GITHUB_ACCESS_TOKEN</code> variable.</p>
<h4 id="defining-gitlab-ci-environment-variables">Defining GitLab CI Environment Variables</h4>
<p>We don&rsquo;t want to expose our passwords in files, because other people could have access to it. If you are the only person that will ever have access to this repository, then you can ignore all this and just replace the variable in your configuration file. However, it is STRONGLY advised to keep your secrets somewhere safe.</p>
<p><strong>Steps</strong><br>
You can skip the steps below and go right to the page to create a token <a href="https://github.com/settings/tokens/new?scopes=public_repo">here</a>.</p>
<ol>
<li>In your GitHub, go to <strong>Settings</strong></li>
<li>On the left bottom, click <strong>Developer Settings</strong></li>
<li>Then <strong>Personal access tokens</strong></li>
<li>Click on <strong>Generate new token</strong></li>
<li>Select <code>public_repo</code></li>
<li>Finally, Click <strong>Generate token</strong></li>
</ol>
<p>With your new token, go to your repository in GitLab.</p>
<ol>
<li>Click on <strong>Settings</strong></li>
<li>Then <strong>CI / CD</strong></li>
<li>Expand the <strong>Variables</strong> section.</li>
<li>For variable name, type <code>GITHUB_ACCESS_TOKEN</code></li>
<li>For the value, enter the new token.</li>
<li>Mark it as <strong>Protected</strong></li>
<li>Save variables</li>
</ol>
<p>If you try to run your pipeline now, it should pass correctly. You should also see that your changes are now being pushed to your GitHub pages and that your website is now being correctly displayed.</p>
<p>I hope this helps! Thanks for reading my first post!</p>
</section>

  
    
  
    <div class="giscus-comment">
    <script
      src="https://giscus.app/client.js"
      data-repo="vrcca/vrcca.github.io"
      data-repo-id="MDEwOlJlcG9zaXRvcnkyNTQzODE2Ng=="
      data-category="Announcements"
      data-category-id="DIC_kwDOAYQn1s4CdHIg"
      data-mapping="pathname"
      data-strict="0"
      data-reactions-enabled="1"
      data-emit-metadata="0"
      data-input-position="top"
      data-theme="light"
      data-lang="en"
      
        data-loading="lazy"
      
      crossorigin="anonymous"
      async
    >
    </script>
</div>
  

    
  


  <footer>
    
      <div class="pb-14 taxonomy-list tags-list">
      
        <a href="/tags/blog/" alt="blog">
          blog
        </a>
      
        <a href="/tags/gitlab/" alt="gitlab">
          gitlab
        </a>
      
        <a href="/tags/hugo/" alt="hugo">
          hugo
        </a>
      
      </div>
    
  </footer>
</article>


    </main><footer class="pt-5 pb-10 grid gap-3 sm:grid-cols-2">
    <div class="text-xs font-semibold text-gray-500 order-2 sm:order-1">
  © 2024 —
  <a href="https://blog.vitor.info/">Vitor Cavalcanti</a> 
  <span class="font-normal">with</span>
  <a
    href="https://github.com/nixentric/Lowkey-Hugo-Theme"
    target="_blank"
    rel="noopener noreferrer"
  >
    Lowkey
  </a>
</div>

    <div class="order-1 sm:order-2">
  <ul class="flex sm:justify-end gap-5">
    
    
    <li>    
      <a href="https://genserver.social/vitor" target="_blank" rel="noopener noreferrer">Fediverse</a>
    </li>
    
    <li>    
      <a href="https://linkedin.com/in/vrcca" target="_blank" rel="noopener noreferrer">LinkedIn</a>
    </li>
    
    <li>    
      <a href="https://github.com/vrcca" target="_blank" rel="noopener noreferrer">GitHub</a>
    </li>
    
    
  </ul>
</div>

</footer></body>
</html>
